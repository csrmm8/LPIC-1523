**Virtualizaci√≥n anidada**

****E**s posible crear una m√°quina virtual KVM/QEMU dentro de una
m√°quina virtual de VirtualBox**, pero con **algunas limitaciones**
importantes. Est√°s entrando en el terreno de la **virtualizaci√≥n
anidada**, y eso depende de:

1.  **Si VirtualBox permite virtualizaci√≥n anidada en tu sistema**.
2.  **Si tu CPU (Intel VT-x o AMD-V) est√° habilitada y soporta la
    virtualizaci√≥n anidada**.
3.  **Que el sistema host (Windows 10) tenga habilitado VT-x/AMD-V en la
    BIOS/UEFI**.

### ‚ö†Ô∏è Importante:

KVM (Kernel-based Virtual Machine) **requiere acceso directo al hardware
de virtualizaci√≥n**, lo cual normalmente no est√° disponible dentro de
una VM en VirtualBox **a menos que actives la virtualizaci√≥n anidada**.

## ‚úÖ Requisitos previos

1.  **Sistema host: Windows 10**
2.  **CPU con soporte VT-x (Intel) o AMD-V**
3.  **VirtualBox instalado**
4.  **VirtualBox Guest VM: Ubuntu 24.04 instalada **(Usaremos Linux Mint
    xia)****
5.  **VirtualBox Extension Pack instalado** (en el host)
6.  **VirtualBox VM configurada con virtualizaci√≥n anidada habilitada**

## üõ† Paso 1: Habilitar virtualizaci√≥n anidada en VirtualBox

1.  **Apaga la VM de Ubuntu 24.04.**

2.  Abre una terminal CMD o PowerShell en Windows.

3.  Ejecuta:

    *VBoxManage modifyvm \"UbuntuVM\" \--nested-hw-virt on*

    Cambia *\"UbuntuVM\"* por el nombre real de tu m√°quina virtual.

## üõ† Paso 2: Verificar si KVM est√° disponible en Ubuntu

1.  Inicia la VM de Ubuntu 24.04.

2.  Abre una terminal y ejecuta:

    *egrep -c \'(vmx\|svm)\' /proc/cpuinfo*

    Si el resultado es **0**, no tienes acceso al hardware de
    virtualizaci√≥n.\
    Si el resultado es **1 o m√°s**, puedes continuar.

3.  Verifica que *kvm* est√© disponible:

    *sudo apt update*

    *sudo apt install cpu-checker*

    *kvm-ok*

    Si dice *\"KVM acceleration can be used\"*, ¬°est√°s listo!

## üõ† Paso 3: Instalar QEMU y herramientas necesarias

*sudo apt install qemu-kvm libvirt-daemon-system libvirt-clients
bridge-utils virt-manager*

Verifica que tu usuario est√© en el grupo *libvirt*:

*sudo usermod -aG libvirt \$(whoami)*

*newgrp libvirt*

## üõ† Paso 4: Crear una VM Alpine con QEMU/KVM

1.  **Descarga Alpine ISO**:

    *wget
    https://dl-cdn.alpinelinux.org/alpine/v3.19/releases/x86_64/alpine-standard-3.19.1-x86_64.iso*

2.  **Crea un disco virtual para Alpine**:

    *qemu-img create -f qcow2 alpine.qcow2 2G*

3.  **Inicia la instalaci√≥n**:

    *qemu-system-x86_64 \\*

    *-m 512 \\*

    *-enable-kvm \\*

    *-cpu host \\*

    *-drive file=alpine.qcow2,format=qcow2 \\*

    *-cdrom alpine-standard-3.19.1-x86_64.iso \\*

    *-boot d \\*

    *-net nic -net user \\*

    *-nographic*

    Esto inicia la instalaci√≥n de Alpine en modo consola.

## üìù Notas adicionales

- Si *-enable-kvm* da error, es que no tienes acceso a KVM. Puedes
  quitarlo y QEMU usar√° emulaci√≥n **sin aceleraci√≥n por hardware**, pero
  ser√° **muy lento**.
- Puedes usar *virt-manager* si prefieres interfaz gr√°fica: ejecuta
  *virt-manager* y crea la VM desde all√≠.
- Alpine es ideal por ser liviana, lo cual ayuda cuando est√°s dentro de
  una VM.

## ‚úÖ Conclusi√≥n

S√≠, **puedes correr QEMU/KVM dentro de una VM de VirtualBox** si
habilitas **virtualizaci√≥n anidada**. Sin acceso a KVM, QEMU a√∫n puede
funcionar pero m√°s lento. Este tipo de entorno es √∫til para pruebas,
laboratorios o estudios de virtualizaci√≥n.
